{% extends "container-2col.html" %}


{% block body %}
      <article>
          <div class="row">
            <header class="col-md-12">
              <h1>
                  <a class="pull-left" href="{{url_for('repo', username=repository.owner, reponame=repository.name)}}"><span class="glyphicon glyphicon-home"></span></a>
                  {{repository.owner}}/{{repository.name}}
                  <img alt="Status badge" src="{{ url_for('repo_badge_status', username=repository.owner, reponame=repository.name, branch=test.branch_slug, uuid=test.uuid) }}" />
                  <img alt="Status badge" src="{{ url_for('repo_badge_coverage', username=repository.owner, reponame=repository.name,branch=test.branch_slug, uuid=test.uuid) }}" />
              </h1>
              <div class="dl-horizontal card">
                <div class="left {{test.status|success_class}}">
                  <span class="glyphicon glyphicon-cog"></span>
                </div>
                <div class="row">
                  <div class="col-md-3">
                      <ul class="list-unstyled">
                        <li>Branch: <span class="dd">{{test.branch}}</span></li>
                        <li>Started: <span class="dd">{{test.run_at}}</span></li>
                      </ul>
                  </div>
                  <div class="col-md-9 text-right">
                    <img class="user" src="{{test.gravatar}}?s=50" alt="{{test.user}}" />
                    {{test.user}}
                    {{test.sha[0:8]}}
                  </div>
                </div>
              </div>
          </header>
        </div>
        <div class="row">
          <section class="col-md-12">
            <ol class="logs" id="log-container">
              {% for log in test.logs if log.text %}
                <li>{{log.text|format_log}}</li>
              {% endfor %}
            </ol>
          </section>
        </div>
      </article>
{% endblock %}

{% block script %}
{% if test.status is none %}
<input type="hidden" href="{{url_for('api_test_status', username=test.username, reponame=test.reponame, slug=test.branch_slug, uuid=test.uuid)}}" data-target="#log-container" id="informations-log"/>
<script type="text/javascript">
  $(document).ready(function() {

    reload($("#informations-log"));

  });
</script>
<script src="{{url_for('static', filename='js/format.log.js')}}"></script>
{% endif %}
{% endblock %}